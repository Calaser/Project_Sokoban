(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const y of a.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();const S=[[[1,1,1,1,1,1,1,1],[1,1,1,0,0,0,1,1],[1,3,9,2,0,0,1,1],[1,1,1,0,2,3,1,1],[1,3,1,1,2,0,1,1],[1,0,1,0,3,0,1,1],[1,2,0,4,2,2,3,1],[1,0,0,0,3,0,0,1],[1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,2,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,2,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,2,0,0,2,0,1,1,1,1,1,1,1],[1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1],[1,0,0,0,1,0,1,1,1,0,1,1,0,0,3,3,1],[1,0,2,0,0,2,0,0,0,9,0,0,0,0,3,3,1],[1,1,1,1,1,0,1,1,1,1,0,1,0,0,3,3,1],[1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,3,0,0,1,0,0,0,0,0,1,1,1],[1,3,3,0,0,1,0,2,0,0,2,0,0,1],[1,3,3,0,0,1,2,1,1,1,1,0,0,1],[1,3,3,0,0,0,0,9,0,1,1,0,0,1],[1,3,3,0,0,1,0,1,0,0,2,0,1,1],[1,1,1,1,1,1,0,1,1,2,0,2,0,1],[1,1,1,0,2,0,0,2,0,2,0,2,0,1],[1,1,1,0,0,0,0,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,9,1,1],[1,1,1,1,1,1,0,2,1,2,0,1,1,1],[1,1,3,1,1,1,0,2,0,0,2,1,1,1],[1,3,3,1,1,1,1,2,0,2,0,1,1,1],[1,3,3,0,0,1,0,2,0,1,0,1,1,1],[1,3,3,0,0,1,0,2,0,0,2,0,0,1],[1,3,3,0,0,0,2,0,0,2,0,0,0,1],[1,3,3,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1],[1,1,0,2,2,2,1,2,0,2,0,2,1,1,1,1,1,1,1,1],[1,1,0,0,2,0,0,0,0,0,2,0,1,0,0,3,3,3,3,1],[1,1,0,2,2,0,1,2,0,0,2,0,1,0,0,3,3,3,3,1],[1,1,9,0,2,0,1,0,0,2,0,2,0,0,0,3,3,3,3,1],[1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,3,3,3,3,1],[1,9,0,2,0,0,0,0,0,0,1,1,1,0,0,3,3,3,3,1],[1,0,2,2,1,2,2,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,1,0,1,2,1,1,0,0,1],[1,3,3,0,0,1,1,0,0,0,0,0,2,0,1],[1,3,3,0,0,1,1,0,1,1,1,0,0,0,1],[1,3,3,0,0,1,1,0,2,0,0,2,1,1,1],[1,3,3,0,0,0,0,2,0,2,2,0,1,1,1],[1,3,3,0,0,1,1,2,0,0,2,0,9,1,1],[1,3,3,0,0,1,1,0,0,2,0,0,1,1,1],[1,1,1,1,1,1,1,0,2,0,2,0,0,1,1],[1,1,1,1,1,1,1,1,1,0,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,0,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1],[1,3,3,0,0,1,1,1,1,9,1,1],[1,3,3,0,0,1,1,1,0,0,0,1],[1,3,3,0,0,0,0,0,2,2,0,1],[1,3,3,0,0,1,0,1,0,2,0,1],[1,3,3,0,1,1,0,1,0,2,0,1],[1,1,1,1,0,2,0,1,2,0,0,1],[1,1,1,1,0,0,2,1,0,2,0,1],[1,1,1,1,0,2,0,0,2,0,0,1],[1,1,1,1,0,0,1,1,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,1,1],[1,1,0,1,0,9,1,1,0,2,2,0,1],[1,0,0,0,0,2,0,0,0,0,0,0,1],[1,0,0,2,0,0,1,1,1,0,0,0,1],[1,1,1,0,1,1,1,1,1,2,1,1,1],[1,0,2,0,0,1,1,1,0,3,3,1,1],[1,0,2,0,2,0,2,0,3,3,3,1,1],[1,0,0,0,0,1,1,1,3,3,3,1,1],[1,0,2,2,0,1,1,1,3,3,3,1,1],[1,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,2,0,0,0,2,0,2,0,1],[1,1,1,0,2,1,0,2,0,1,0,0,2,0,0,1],[1,1,1,0,0,2,0,2,0,0,1,0,0,0,0,1],[1,1,1,0,2,1,0,1,0,0,1,1,1,1,0,1],[1,9,1,2,0,2,0,2,0,0,1,1,0,0,0,1],[1,0,0,0,0,2,0,1,2,1,0,0,0,1,0,1],[1,0,0,0,2,0,0,0,0,2,0,2,0,2,0,1],[1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,3,3,3,3,3,3,1,1,1,1,1,1,1],[1,1,1,3,3,3,3,3,3,1,1,1,1,1,1,1],[1,1,1,3,3,3,3,3,3,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,0,3,3,3,1],[1,1,1,1,1,1,1,1,1,1,1,0,0,3,3,3,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,3,3,3,1],[1,1,1,1,1,1,1,0,0,1,1,0,0,3,3,3,1],[1,1,1,1,1,1,1,1,0,1,1,0,0,3,3,3,1],[1,1,1,1,1,1,0,2,2,2,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,2,0,2,0,1,1,1,1,1],[1,1,0,0,0,1,2,0,2,0,0,0,1,0,0,0,1],[1,9,0,2,0,0,2,0,0,0,0,2,0,0,2,0,1],[1,1,1,1,1,1,0,2,2,0,2,0,1,1,1,1,1],[1,1,1,1,1,1,0,2,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]];document.querySelector("#app").innerHTML=`
  <div id="nav">
    <button id="decrementBtn">Previous Stage (Q)<br>&#10094;</button>
    <button id="restartBtn">Reset Stage (R)<br>&#8634;</button>
    <button id="incrementBtn">Next Stage (E)<br>&#10095;</button>
  </div>
  <div id="main">
    <p id="screen">Loading...</p>
    <div id="completeMsg">Congratulations! You just finish this stage.<br>Click stage select button to play other stage.</div>
    <div id="resetAllStageMsg">
      <p>Do you really want to reset all record?</p>
      <button id="resetYes">Yes</button>
      <button id="resetNo">No</button>
    </div>
  </div>
  <div id="navBottom">
    <p id="stageCounter">Loading Stage</p>
    <button id="menuBtn">Select Stage Menu (M)</button>
    <button id="resetAllStageBtn">Reset All Stage</button>
    <p id="desc">Loading...</p>
  </div>
  <div id="virtualKeyboard">
    <button id="upBtn"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-arrow-up-square" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 9.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/> </svg></button>
    <button id="downBtn"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-arrow-down-square" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"/> </svg></button>
    <button id="leftBtn"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-arrow-left-square" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/> </svg></button>
    <button id="rightBtn"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-arrow-right-square" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm4.5 5.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/> </svg></button>
  </div>
  <div id="stageMenuWrapper">
  <button id="closeBtn">✖</button>
  <h1>Stage Select</h1>
    <div id="stageMenu">
    </div>
  </div>
`;const p=S;let d=0,l=JSON.parse(JSON.stringify(p[d])),n,o,c,u=[];if(localStorage.getItem("mapClearStatus"))u=JSON.parse(localStorage.getItem("mapClearStatus"));else for(let e=0;p[e];e++)u.push(0);h(p);document.querySelector("#menuBtn").addEventListener("click",()=>{document.querySelector("#stageMenuWrapper").style.display!=="block"?document.querySelector("#stageMenuWrapper").style.display="block":document.querySelector("#stageMenuWrapper").style.display="none"});document.querySelector("#closeBtn").addEventListener("click",()=>{document.querySelector("#stageMenuWrapper").style.display="none"});document.querySelector("#resetAllStageBtn").addEventListener("click",()=>{document.querySelector("#resetAllStageMsg").style.display!=="block"?document.querySelector("#resetAllStageMsg").style.display="block":document.querySelector("#resetAllStageMsg").style.display="none"});document.querySelector("#resetYes").addEventListener("click",()=>{document.querySelector("#resetAllStageMsg").style.display="none",u=[];for(let e=0;p[e];e++)u[e]=0,document.querySelector(`#stageBtn${e}`).style.backgroundColor="#63a9af";localStorage.setItem("mapClearStatus",JSON.stringify(u)),g(0)});document.querySelector("#resetNo").addEventListener("click",()=>{document.querySelector("#resetAllStageMsg").style.display="none"});g(0);document.querySelector("#decrementBtn").addEventListener("click",()=>{g(-1)});document.querySelector("#restartBtn").addEventListener("click",()=>{g(0)});document.querySelector("#incrementBtn").addEventListener("click",()=>{g(1)});document.querySelector("#upBtn").addEventListener("click",()=>{c||(f(0,-1),m())});document.querySelector("#downBtn").addEventListener("click",()=>{c||(f(0,1),m())});document.querySelector("#leftBtn").addEventListener("click",()=>{c||(f(-1,0),m())});document.querySelector("#rightBtn").addEventListener("click",()=>{c||(f(1,0),m())});window.addEventListener("keydown",e=>{switch(e.code){case"KeyW":case"ArrowUp":case"Numpad8":if(c)break;f(0,-1);break;case"KeyS":case"ArrowDown":case"Numpad2":if(c)break;f(0,1);break;case"KeyA":case"ArrowLeft":case"Numpad4":if(c)break;f(-1,0);break;case"KeyD":case"ArrowRight":case"Numpad6":if(c)break;f(1,0);break;case"KeyQ":g(-1);break;case"KeyR":g(0);break;case"KeyE":g(1);break;case"KeyM":document.querySelector("#stageMenuWrapper").style.display!=="block"?document.querySelector("#stageMenuWrapper").style.display="block":document.querySelector("#stageMenuWrapper").style.display="none";break}m()});function h(e){for(var t=0;e[t];t++){var s=document.createElement("button");s.id=`stageBtn${t}`,s.textContent=`${t+1}`,u[t]&&(s.style.backgroundColor="#cce70f"),s.addEventListener("click",function(i){return function(){g(1e3+i),document.querySelector("#stageMenuWrapper").style.display="none"}}(t)),document.querySelector("#stageMenu").appendChild(s)}}function g(e){if(e>=1e3&&(d=e-1e3,e=0),p[d+e]){d+=e,l=JSON.parse(JSON.stringify(p[d]));for(let t=0;t<l.length;t++)for(let s=0;s<l[t].length;s++)l[t][s]===9&&(n=s,o=t,l[t][s]=0);c=!1,document.querySelector("#completeMsg").style.display="none",document.querySelector("#desc").innerHTML=`當前位置為(${n},${o})`,u[d]?document.querySelector("#stageCounter").innerHTML='<svg style="color: #f3da35; transform: translate(-5px, 15px);" width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M12 7C12 6.44772 12.4477 6 13 6H35C35.5523 6 36 6.44772 36 7V8H41C41.5523 8 42 8.44772 42 9V15C42 17.7614 39.7614 20 37 20H35.3172C33.8847 24.0529 30.3367 27.1065 26 27.8341V34H32C32.5523 34 33 34.4477 33 35V41C33 41.5523 32.5523 42 32 42H16C15.4477 42 15 41.5523 15 41V35C15 34.4477 15.4477 34 16 34H22V27.8341C17.6633 27.1065 14.1153 24.0529 12.6828 20H11C8.23858 20 6 17.7614 6 15V9C6 8.44772 6.44772 8 7 8H12V7ZM36 16V10H40V15C40 16.6569 38.6569 18 37 18H36V16ZM12 10H8V15C8 16.6569 9.34315 18 11 18H12V16V10Z" fill="#f3da35"></path> </svg>':document.querySelector("#stageCounter").innerHTML="",document.querySelector("#stageCounter").innerHTML+=`Stage ${d+1}`,document.querySelector("#screen").innerHTML=v(l,n,o)}}function f(e,t){l[o+t][n+e]===0||l[o+t][n+e]===3?(e&&(n+=e,o+=t),t&&(n+=e,o+=t)):l[o+t][n+e]===2?l[o+2*t][n+2*e]===0?(l[o+t][n+e]=0,l[o+2*t][n+2*e]=2,n+=e,o+=t):l[o+2*t][n+2*e]===3&&(l[o+t][n+e]=0,l[o+2*t][n+2*e]=4,n+=e,o+=t):l[o+t][n+e]===4&&(l[o+2*t][n+2*e]===0?(l[o+t][n+e]=3,l[o+2*t][n+2*e]=2,n+=e,o+=t):l[o+2*t][n+2*e]===3&&(l[o+t][n+e]=3,l[o+2*t][n+2*e]=4,n+=e,o+=t))}function v(e,t,s){var i="";for(let r=0;r<e.length;r++)for(let a=0;a<e[r].length;a++)r>=0&&a>=0&&e[r]!==void 0&&e[r][a]!==void 0?r===s&&a===t?i+="<span id='me'>我</span>":e[r][a]===0?i+="&emsp;":e[r][a]===1?i+="壁":e[r][a]===2?i+="口":e[r][a]===3?i+="。":e[r][a]===4?i+="回":i+=e[r][a]:i+="&emsp;",a===e[r].length-1&&(i+="<br>");return i}function m(){document.querySelector("#desc").innerHTML=`當前位置為(${n},${o})`,document.querySelector("#screen").innerHTML=v(l,n,o),c=!0;for(var e=0;e<l.length;e++)for(var t=0;t<l[e].length;t++)l[e][t]===3&&(c=!1);c&&(document.getElementById("completeMsg").style.display="block",u[d]||(document.getElementById(`stageBtn${d}`).style.backgroundColor="#f3da35",u[d]=1,localStorage.setItem("mapClearStatus",JSON.stringify(u))))}
